(()=>{"use strict";class e{constructor(){this.board=[],this.createBoard(),this.hits=[],this.misses=[],this.placedShips=[],this.gameOver=!1,this.sunkShips=[]}createBoard(){let e=0;for(let t=0;t<10;t++){this.board[t]=[];for(let s=0;s<10;s++)e++,this.board[t][s]=e}}placeShip(e,t,s){if(s&&!0===this.validPlacement(t,e.length,!0)){for(let s=0;s<e.length;s++){for(let s=0;s<this.board.length;s++)if(this.board[s].includes(t)){let n=this.board[s].indexOf(t);this.board[s][n]=e.name}t+=10}this.placedShips.push(e)}else if(!s&&!0===this.validPlacement(t,e.length,!1)){for(let s=0;s<e.length;s++){for(let s=0;s<this.board.length;s++)if(this.board[s].includes(t)){let n=this.board[s].indexOf(t);this.board[s][n]=e.name}t+=1}this.placedShips.push(e)}}recieveAttack(e,t){let s=e+t;Number.isInteger(this.board[e][t])?this.misses.push(s):(this.hits.push(s),this.placedShips.forEach((n=>{if(n.name===this.board[e][t])return n.hit(s),n.isSunk(),void(n.isSunk()&&this.sunkShips.push(n))})))}isOver(){return 4===this.sunkShips.length}validPlacement(e,t,s){let n=this.convertPosition(e),r=this.getRow(n),i=this.getCol(n);if(s&&r+t>10)return!1;if(!s&&i+t>10)return!1;if(s)for(let e=0;e<t;e++){if(!Number.isInteger(this.board[r][i]))return!1;r++}else for(let e=0;e<t;e++){if(!Number.isInteger(this.board[r][i]))return!1;i++}return!0}randomlyPlaceShips(e){let t,s,n=!1;for(;!n;)t=Math.floor(100*Math.random())+1,s=Math.random()<.5,this.validPlacement(t,e.length,s)?(n=!0,this.placeShip(e,t,s)):n=!1}convertPosition(e){let t,s,n=e.toString();return e<11?(t=e-1,s=0):100===e?(s=9,t=9):e%10==0?(s=parseInt(n.slice(0,1)),t=9):(s=parseInt(n.slice(0,1)),t=parseInt(n.slice(1,2))-1),s.toString()+t.toString()}getCol(e){return parseInt(e.slice(1,2))}getRow(e){return parseInt(e.slice(0,1))}}class t{constructor(t,s){this.gameboard=new e,this.name=t,this.shots=[],this.oponent=s}attack(e,t){let s=this.gameboard.convertPosition(e),n=this.gameboard.getRow(s),r=this.gameboard.getCol(s);this.shots.includes(e)||(this.shots.push(e),t.gameboard.recieveAttack(n,r),t.gameboard.isOver())}randomAttack(e){let t,s=!1;for(;!s;){t=Math.floor(100*Math.random())+1;let n=this.gameboard.convertPosition(t),r=this.gameboard.getRow(n),i=this.gameboard.getCol(n);if(!this.shots.includes(t))return this.shots.push(t),e.gameboard.recieveAttack(r,i),s=!0,t}}}class s{constructor(e,t){this.length=e,this.isHit=[],this.sunk=!1,this.name=t}hit(e){if(!this.isHit.includes(e)&&this.isHit.length<this.length)return this.isHit.push(e),this.isHit}isSunk(){return this.isHit.length===this.length&&(this.sunk=!0,!0)}}let n=new t("human","computer"),r=new t("computer","human"),i=n.gameboard.board,a=r.gameboard.board,o=new s(5,"carrier"),l=new s(4,"destroyer"),c=new s(3,"submarine"),d=new s(2,"patrol"),u=new s(5,"carrier"),h=new s(4,"destroyer"),m=new s(3,"submarine"),p=new s(2,"patrol");const g=[o,l,c,d],b=[u,h,m,p];let f=0;function S(e){f++;const t=[];if(4===t.length)return;let s;const u=document.querySelector(".info");null==u||u.classList.remove("info"),null==u||u.classList.add("hide");const h=document.querySelector(".place");null==h||h.classList.remove("hide");const m=document.querySelector(".grid-container"),p=document.querySelector(".ships"),v=document.querySelector(".rotate"),L=document.querySelector(".carrier"),y=document.querySelector(".destroyer"),C=document.querySelector(".submarine"),E=document.querySelector(".patrol");if(1===f){null==v||v.addEventListener("click",(function(){(null==L?void 0:L.classList.contains("rotated"))?(null==p||p.classList.remove("ships-horizontal"),null==p||p.classList.add("ships-vertical"),L.classList.remove("rotated"),null==y||y.classList.remove("rotated"),null==C||C.classList.remove("rotated"),null==E||E.classList.remove("rotated")):(null==p||p.classList.remove("ships-vertical"),null==p||p.classList.add("ships-horizontal"),null==L||L.classList.add("rotated"),null==y||y.classList.add("rotated"),null==C||C.classList.add("rotated"),null==E||E.classList.add("rotated"))}));const t=document.querySelector(".start-game");null==t||t.addEventListener("click",(function(){h.innerHTML="",function(e){document.querySelector("body"),console.log(i);const t=document.querySelector(".place");null==t||t.classList.add("hide");const s=document.querySelector("#main");s.classList.remove("hide"),s.classList.add("main"),document.querySelector(".content"),document.querySelector(".grid1");const o=document.querySelector(".grid-container1");document.querySelector(".title-1").textContent=e;const l=document.querySelector(".sunken1"),c=(document.querySelector(".grid2"),document.querySelector(".grid-container2"));document.querySelector(".title-2").textContent="Computer";const d=document.querySelector(".sunken2"),u=document.querySelector(".who-won"),h=document.createElement("button");h.classList.add("restart"),h.textContent="Restart",h.addEventListener("click",(function(){location.reload()})),b.forEach((e=>{r.gameboard.randomlyPlaceShips(e)}));let m=0;for(let e=0;e<i.length;e++)for(let t=0;t<i[e].length;t++){m++;const s=document.createElement("div");s.setAttribute("hposition",m),Number.isInteger(i[e][t])||s.classList.add("ship-here"),s.classList.add("grid-item"),null==o||o.appendChild(s)}for(let t=0;t<a.length;t++)for(let s=0;s<a[t].length;s++){const o=document.createElement("div");o.setAttribute("cposition",a[t][s]),o.classList.add("grid-item"),o.classList.add("ai-grid"),o.addEventListener("click",(function(){if(o.classList.contains("hit")||o.classList.contains("miss")||n.gameboard.isOver()||r.gameboard.isOver())return;if(Number.isInteger(a[t][s]))o.classList.add("miss");else{o.classList.add("hit");let n=!1;if(r.gameboard.recieveAttack(t,s),r.gameboard.placedShips.forEach((e=>{e.name===a[t][s]&&(n=e.sunk)})),n){const n=document.createElement("h2");if(n.textContent=a[t][s],null==d||d.appendChild(n),r.gameboard.isOver()){const t=document.createElement("h1");t.textContent="Winner: "+e+"!",null==u||u.appendChild(t),null==u||u.appendChild(h)}}}let c;c=r.randomAttack(n);const m=document.querySelector(`[hposition="${c}"]`);let p=c,g=n.gameboard.convertPosition(p),b=n.gameboard.getRow(g),f=n.gameboard.getCol(g);if(Number.isInteger(n.gameboard.board[b][f]))null==m||m.classList.add("miss");else{null==m||m.classList.remove("ship-here"),null==m||m.classList.add("hit");let e=!1;if(n.gameboard.recieveAttack(t,s),n.gameboard.placedShips.forEach((t=>{t.name===i[b][f]&&(e=t.sunk)})),e){const e=document.createElement("h2");if(e.textContent=i[b][f],null==l||l.appendChild(e),n.gameboard.isOver()){const e=document.createElement("h1");e.textContent="Winner: Computer!",null==u||u.appendChild(e),null==u||u.appendChild(h)}}}})),null==c||c.appendChild(o)}}(e)}))}k();const q=document.querySelector(".randomly-place");function k(){let e=0;m.innerHTML="";for(let t=0;t<i.length;t++)for(let s=0;s<i[t].length;s++){e++;const n=document.createElement("div");n.setAttribute("data-hposition",e),Number.isInteger(i[t][s])||n.classList.add("ship-here"),n.classList.add("grid-item"),null==m||m.appendChild(n)}}null==q||q.addEventListener("click",(function(){g.forEach((e=>{n.gameboard.randomlyPlaceShips(e)})),q.disabled=!0,m.innerHTML="",k()})),document.querySelectorAll(".draggable").forEach((r=>{r.addEventListener("dragstart",(()=>{r.classList.add("dragging")})),r.addEventListener("dragend",(r=>{const i=r.target,a=parseInt(s.dataset.hposition),u=[i.id,a];var h,m;t.push(u),console.log(t),"carrier"===(h=t)[m=w][0]&&(L.classList.contains("rotated")?n.gameboard.placeShip(o,h[m][1],!1):n.gameboard.placeShip(o,h[m][1],!0)),"destroyer"===h[m][0]&&(L.classList.contains("rotated")?n.gameboard.placeShip(l,h[m][1],!1):n.gameboard.placeShip(l,h[m][1],!0)),"submarine"===h[m][0]&&(L.classList.contains("rotated")?n.gameboard.placeShip(c,h[m][1],!1):n.gameboard.placeShip(c,h[m][1],!0)),"patrol"===h[m][0]&&(L.classList.contains("rotated")?n.gameboard.placeShip(d,h[m][1],!1):n.gameboard.placeShip(d,h[m][1],!0)),w++,S(e)}))})),document.querySelectorAll(".grid-item").forEach((e=>{e.addEventListener("dragover",(e=>{s=e.target}))}));let w=0}!function(){const e=document.querySelector(".info"),t=document.createElement("div");t.classList.add("input-container");const s=document.createElement("label");s.textContent="Enter Name:";const n=document.createElement("input");n.classList.add("name-input");const r=document.createElement("button");r.classList.add("start-button"),r.textContent="Start",t.appendChild(s),t.appendChild(n),t.appendChild(r),null==e||e.appendChild(t),r.addEventListener("click",(function(){if(""!==n.value){const s=n.value;null==e||e.removeChild(t),S(s)}else{const s="To lazy to enter a name";null==e||e.removeChild(t),S(s)}}))}()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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MEMsaUJBQWlCLGNBQ2xDM0YsU0FBUW9GLElBQ2JBLEVBQUt0QixpQkFBaUIsWUFBYXlDLElBQy9CMUcsRUFBVzBHLEVBQUVSLE1BQU0sR0FFckIsSUF0Q1YsSUFBSU8sRUFBVSxDQXFHbEIsRUVsT2UsV0FDWCxNQUFNdEQsRUFBT0MsU0FBU0MsY0FBYyxTQUM5QnNELEVBQWlCdkQsU0FBUzJCLGNBQWMsT0FDOUM0QixFQUFlckQsVUFBVUUsSUFBSSxtQkFDN0IsTUFBTW9ELEVBQVl4RCxTQUFTMkIsY0FBYyxTQUN6QzZCLEVBQVVuQyxZQUFjLGNBQ3hCLE1BQU1vQyxFQUFZekQsU0FBUzJCLGNBQWMsU0FDekM4QixFQUFVdkQsVUFBVUUsSUFBSSxjQUN4QixNQUFNVyxFQUFjZixTQUFTMkIsY0FBYyxVQUMzQ1osRUFBWWIsVUFBVUUsSUFBSSxnQkFDMUJXLEVBQVlNLFlBQWMsUUFDMUJrQyxFQUFldkIsWUFBWXdCLEdBQzNCRCxFQUFldkIsWUFBWXlCLEdBQzNCRixFQUFldkIsWUFBWWpCLEdBQzNCaEIsU0FBNENBLEVBQUtpQyxZQUFZdUIsR0FDN0R4QyxFQUFZRixpQkFBaUIsU0FBUyxXQUNsQyxHQUF3QixLQUFwQjRDLEVBQVVDLE1BQWMsQ0FDeEIsTUFBTW5ILEVBQU9rSCxFQUFVQyxNQUN2QjNELFNBQTRDQSxFQUFLNEQsWUFBWUosR0FDN0R6SCxFQUFVUyxFQUNkLEtBQ0ssQ0FDRCxNQUFNQSxFQUFPLDBCQUNid0QsU0FBNENBLEVBQUs0RCxZQUFZSixHQUM3RHpILEVBQVVTLEVBQ2QsQ0FDSixHQUNKLENDM0JBcUgsRSIsInNvdXJjZXMiOlsid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvZmFjdG9yaWVzL2dhbWVib2FyZC50cyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2ZhY3Rvcmllcy9wbGF5ZXJzLnRzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvZmFjdG9yaWVzL3NoaXAudHMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy91aS9wbGFjZVNoaXAudHMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy91aS9yZW5kZXJHYW1lQm9hcmRzLnRzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvdWkvc3RhcnRHYW1lLnRzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gaW1wb3J0IHsgU2hpcCB9IGZyb20gJy4vc2hpcCdcclxuZXhwb3J0IGNsYXNzIEdhbWVCb2FyZCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmJvYXJkID0gW107XHJcbiAgICAgICAgdGhpcy5jcmVhdGVCb2FyZCgpO1xyXG4gICAgICAgIHRoaXMuaGl0cyA9IFtdO1xyXG4gICAgICAgIHRoaXMubWlzc2VzID0gW107XHJcbiAgICAgICAgdGhpcy5wbGFjZWRTaGlwcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuZ2FtZU92ZXIgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnN1bmtTaGlwcyA9IFtdO1xyXG4gICAgfVxyXG4gICAgY3JlYXRlQm9hcmQoKSB7XHJcbiAgICAgICAgbGV0IGNvdW50ID0gMDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5ib2FyZFtpXSA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDEwOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGNvdW50Kys7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJvYXJkW2ldW2pdID0gY291bnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwbGFjZVNoaXAoc2hpcCwgc3RhcnQsIHZlcnRpY2FsKSB7XHJcbiAgICAgICAgaWYgKHZlcnRpY2FsICYmIHRoaXMudmFsaWRQbGFjZW1lbnQoc3RhcnQsIHNoaXAubGVuZ3RoLCB0cnVlKSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXAubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5ib2FyZC5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmJvYXJkW2pdLmluY2x1ZGVzKHN0YXJ0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSB0aGlzLmJvYXJkW2pdLmluZGV4T2Yoc3RhcnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJvYXJkW2pdW2luZGV4XSA9IHNoaXAubmFtZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzdGFydCArPSAxMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnBsYWNlZFNoaXBzLnB1c2goc2hpcCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCF2ZXJ0aWNhbCAmJlxyXG4gICAgICAgICAgICB0aGlzLnZhbGlkUGxhY2VtZW50KHN0YXJ0LCBzaGlwLmxlbmd0aCwgZmFsc2UpID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmJvYXJkLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYm9hcmRbal0uaW5jbHVkZXMoc3RhcnQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbmRleCA9IHRoaXMuYm9hcmRbal0uaW5kZXhPZihzdGFydCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYm9hcmRbal1baW5kZXhdID0gc2hpcC5uYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHN0YXJ0ICs9IDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5wbGFjZWRTaGlwcy5wdXNoKHNoaXApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJlY2lldmVBdHRhY2socm93LCBjb2x1bW4pIHtcclxuICAgICAgICBsZXQgcG9zaXRpb24gPSByb3cgKyBjb2x1bW47XHJcbiAgICAgICAgaWYgKCFOdW1iZXIuaXNJbnRlZ2VyKHRoaXMuYm9hcmRbcm93XVtjb2x1bW5dKSkge1xyXG4gICAgICAgICAgICB0aGlzLmhpdHMucHVzaChwb3NpdGlvbik7XHJcbiAgICAgICAgICAgIHRoaXMucGxhY2VkU2hpcHMuZm9yRWFjaCgoc2hpcCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNoaXAubmFtZSA9PT0gdGhpcy5ib2FyZFtyb3ddW2NvbHVtbl0pIHtcclxuICAgICAgICAgICAgICAgICAgICBzaGlwLmhpdChwb3NpdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hpcC5pc1N1bmsoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2hpcC5pc1N1bmsoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN1bmtTaGlwcy5wdXNoKHNoaXApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5taXNzZXMucHVzaChwb3NpdGlvbik7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpc092ZXIoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc3Vua1NoaXBzLmxlbmd0aCA9PT0gNCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgdmFsaWRQbGFjZW1lbnQocG9zaXRpb24sIGxlbmd0aCwgaXNWZXJ0aWNhbCkge1xyXG4gICAgICAgIGxldCBuZXdQb3NpdGlvbiA9IHRoaXMuY29udmVydFBvc2l0aW9uKHBvc2l0aW9uKTtcclxuICAgICAgICBsZXQgcm93ID0gdGhpcy5nZXRSb3cobmV3UG9zaXRpb24pO1xyXG4gICAgICAgIGxldCBjb2x1bW4gPSB0aGlzLmdldENvbChuZXdQb3NpdGlvbik7XHJcbiAgICAgICAgaWYgKGlzVmVydGljYWwgJiYgcm93ICsgbGVuZ3RoID4gMTApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICghaXNWZXJ0aWNhbCAmJiBjb2x1bW4gKyBsZW5ndGggPiAxMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc1ZlcnRpY2FsKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmICghTnVtYmVyLmlzSW50ZWdlcih0aGlzLmJvYXJkW3Jvd11bY29sdW1uXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByb3crKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNJbnRlZ2VyKHRoaXMuYm9hcmRbcm93XVtjb2x1bW5dKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbisrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgcmFuZG9tbHlQbGFjZVNoaXBzKHNoaXApIHtcclxuICAgICAgICBsZXQgdmFsaWQgPSBmYWxzZTtcclxuICAgICAgICBsZXQgcG9zaXRpb247XHJcbiAgICAgICAgbGV0IGRpcmVjdGlvbjtcclxuICAgICAgICB3aGlsZSAoIXZhbGlkKSB7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwKSArIDE7XHJcbiAgICAgICAgICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgMC41KSB7XHJcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMudmFsaWRQbGFjZW1lbnQocG9zaXRpb24sIHNoaXAubGVuZ3RoLCBkaXJlY3Rpb24pKSB7XHJcbiAgICAgICAgICAgICAgICB2YWxpZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYWNlU2hpcChzaGlwLCBwb3NpdGlvbiwgZGlyZWN0aW9uKTtcclxuICAgICAgICAgICAgICAgIC8vIHJldHVyblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFsaWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnZlcnRQb3NpdGlvbihwb3NpdGlvbikge1xyXG4gICAgICAgIGxldCBjb2x1bW47XHJcbiAgICAgICAgbGV0IHN0ciA9IHBvc2l0aW9uLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgbGV0IHJvdztcclxuICAgICAgICBpZiAocG9zaXRpb24gPCAxMSkge1xyXG4gICAgICAgICAgICBjb2x1bW4gPSBwb3NpdGlvbiAtIDE7XHJcbiAgICAgICAgICAgIHJvdyA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHBvc2l0aW9uID09PSAxMDApIHtcclxuICAgICAgICAgICAgcm93ID0gOTtcclxuICAgICAgICAgICAgY29sdW1uID0gOTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAocG9zaXRpb24gJSAxMCA9PT0gMCkge1xyXG4gICAgICAgICAgICByb3cgPSBwYXJzZUludChzdHIuc2xpY2UoMCwgMSkpO1xyXG4gICAgICAgICAgICBjb2x1bW4gPSA5O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcm93ID0gcGFyc2VJbnQoc3RyLnNsaWNlKDAsIDEpKTtcclxuICAgICAgICAgICAgY29sdW1uID0gcGFyc2VJbnQoc3RyLnNsaWNlKDEsIDIpKSAtIDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBzdHJSb3cgPSByb3cudG9TdHJpbmcoKTtcclxuICAgICAgICBsZXQgc3RyQ29sID0gY29sdW1uLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgbGV0IG5ld1Bvc2l0aW9uID0gc3RyUm93ICsgc3RyQ29sO1xyXG4gICAgICAgIHJldHVybiBuZXdQb3NpdGlvbjtcclxuICAgIH1cclxuICAgIGdldENvbChzdHIpIHtcclxuICAgICAgICByZXR1cm4gcGFyc2VJbnQoc3RyLnNsaWNlKDEsIDIpKTtcclxuICAgIH1cclxuICAgIGdldFJvdyhzdHIpIHtcclxuICAgICAgICByZXR1cm4gcGFyc2VJbnQoc3RyLnNsaWNlKDAsIDEpKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBHYW1lQm9hcmQgfSBmcm9tIFwiLi9nYW1lYm9hcmRcIjtcclxuZXhwb3J0IGNsYXNzIFBsYXllciB7XHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBvcG9uZW50KSB7XHJcbiAgICAgICAgdGhpcy5nYW1lYm9hcmQgPSBuZXcgR2FtZUJvYXJkKCk7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLnNob3RzID0gW107XHJcbiAgICAgICAgdGhpcy5vcG9uZW50ID0gb3BvbmVudDtcclxuICAgIH1cclxuICAgIGF0dGFjayhwb3NpdGlvbiwgb3BvbmVudCkge1xyXG4gICAgICAgIGxldCBuZXdQb3NpdGlvbiA9IHRoaXMuZ2FtZWJvYXJkLmNvbnZlcnRQb3NpdGlvbihwb3NpdGlvbik7XHJcbiAgICAgICAgbGV0IHJvdyA9IHRoaXMuZ2FtZWJvYXJkLmdldFJvdyhuZXdQb3NpdGlvbik7XHJcbiAgICAgICAgbGV0IGNvbCA9IHRoaXMuZ2FtZWJvYXJkLmdldENvbChuZXdQb3NpdGlvbik7XHJcbiAgICAgICAgaWYgKCF0aGlzLnNob3RzLmluY2x1ZGVzKHBvc2l0aW9uKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNob3RzLnB1c2gocG9zaXRpb24pO1xyXG4gICAgICAgICAgICBvcG9uZW50LmdhbWVib2FyZC5yZWNpZXZlQXR0YWNrKHJvdywgY29sKTtcclxuICAgICAgICAgICAgaWYgKG9wb25lbnQuZ2FtZWJvYXJkLmlzT3ZlcigpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcImdnXCIpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByYW5kb21BdHRhY2sob3Bwb25lbnQpIHtcclxuICAgICAgICBsZXQgdmFsaWRTaG90ID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IHBvc2l0aW9uO1xyXG4gICAgICAgIHdoaWxlICghdmFsaWRTaG90KSB7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwKSArIDE7XHJcbiAgICAgICAgICAgIGxldCBuZXdQb3NpdGlvbiA9IHRoaXMuZ2FtZWJvYXJkLmNvbnZlcnRQb3NpdGlvbihwb3NpdGlvbik7XHJcbiAgICAgICAgICAgIGxldCByb3cgPSB0aGlzLmdhbWVib2FyZC5nZXRSb3cobmV3UG9zaXRpb24pO1xyXG4gICAgICAgICAgICBsZXQgY29sID0gdGhpcy5nYW1lYm9hcmQuZ2V0Q29sKG5ld1Bvc2l0aW9uKTtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnNob3RzLmluY2x1ZGVzKHBvc2l0aW9uKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG90cy5wdXNoKHBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgIG9wcG9uZW50LmdhbWVib2FyZC5yZWNpZXZlQXR0YWNrKHJvdywgY29sKTtcclxuICAgICAgICAgICAgICAgIHZhbGlkU2hvdCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAvLyBsZXQgc3RyOiBzdHJpbmdcclxuICAgICAgICAgICAgICAgIC8vIHN0ciA9IHJvdy50b1N0cmluZygpICsgY29sLnRvU3RyaW5nKClcclxuICAgICAgICAgICAgICAgIHJldHVybiBwb3NpdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJleHBvcnQgY2xhc3MgU2hpcCB7XHJcbiAgICBjb25zdHJ1Y3RvcihsZW5ndGgsIG5hbWUpIHtcclxuICAgICAgICB0aGlzLmxlbmd0aCA9IGxlbmd0aDtcclxuICAgICAgICB0aGlzLmlzSGl0ID0gW107XHJcbiAgICAgICAgdGhpcy5zdW5rID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgIH1cclxuICAgIGhpdChwb3NpdGlvbikge1xyXG4gICAgICAgIC8vcHVzaCBwb3NpdGlvbiB0byBpc2hpdCBhcnJheVxyXG4gICAgICAgIGlmICghdGhpcy5pc0hpdC5pbmNsdWRlcyhwb3NpdGlvbikgJiYgdGhpcy5pc0hpdC5sZW5ndGggPCB0aGlzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLmlzSGl0LnB1c2gocG9zaXRpb24pO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pc0hpdDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpc1N1bmsoKSB7XHJcbiAgICAgICAgLy9jaGVja3MgZWFjaCBwb3NpdGlvbiBvZiBzaGlwIGZvciBoaXRzIGlmIGFsbCBhcmUgaGl0IGlzIHN1bmtcclxuICAgICAgICBpZiAodGhpcy5pc0hpdC5sZW5ndGggPT09IHRoaXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3VuayA9IHRydWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHJlbmRlckdyaWRzIGZyb20gXCIuL3JlbmRlckdhbWVCb2FyZHNcIjtcclxuaW1wb3J0IHsgUGxheWVyIH0gZnJvbSBcIi4vLi4vZmFjdG9yaWVzL3BsYXllcnNcIjtcclxuaW1wb3J0IHsgU2hpcCB9IGZyb20gXCIuLy4uL2ZhY3Rvcmllcy9zaGlwXCI7XHJcbmxldCBodW1hbiA9IG5ldyBQbGF5ZXIoXCJodW1hblwiLCBcImNvbXB1dGVyXCIpO1xyXG5sZXQgY29tcHV0ZXIgPSBuZXcgUGxheWVyKFwiY29tcHV0ZXJcIiwgXCJodW1hblwiKTtcclxubGV0IGhCb2FyZCA9IGh1bWFuLmdhbWVib2FyZC5ib2FyZDtcclxubGV0IGNCb2FyZCA9IGNvbXB1dGVyLmdhbWVib2FyZC5ib2FyZDtcclxubGV0IGhDYXJyaWVyID0gbmV3IFNoaXAoNSwgXCJjYXJyaWVyXCIpO1xyXG5sZXQgaERlc3Ryb3llciA9IG5ldyBTaGlwKDQsIFwiZGVzdHJveWVyXCIpO1xyXG5sZXQgaFN1Ym1hcmluZSA9IG5ldyBTaGlwKDMsIFwic3VibWFyaW5lXCIpO1xyXG5sZXQgaFBhdHJvbCA9IG5ldyBTaGlwKDIsIFwicGF0cm9sXCIpO1xyXG5sZXQgY0NhcnJpZXIgPSBuZXcgU2hpcCg1LCBcImNhcnJpZXJcIik7XHJcbmxldCBjRGVzdHJveWVyID0gbmV3IFNoaXAoNCwgXCJkZXN0cm95ZXJcIik7XHJcbmxldCBjU3VibWFyaW5lID0gbmV3IFNoaXAoMywgXCJzdWJtYXJpbmVcIik7XHJcbmxldCBjUGF0cm9sID0gbmV3IFNoaXAoMiwgXCJwYXRyb2xcIik7XHJcbmNvbnN0IGh1bWFuU2hpcHMgPSBbaENhcnJpZXIsIGhEZXN0cm95ZXIsIGhTdWJtYXJpbmUsIGhQYXRyb2xdO1xyXG5jb25zdCBjb21wdXRlclNoaXBzID0gW2NDYXJyaWVyLCBjRGVzdHJveWVyLCBjU3VibWFyaW5lLCBjUGF0cm9sXTtcclxubGV0IGNhbGxzID0gMDtcclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcGxhY2VTaGlwKHBsYXllck5hbWUpIHtcclxuICAgIGNhbGxzKys7XHJcbiAgICBjb25zdCBtYW51YWxseVBsYWNlZFNoaXBzID0gW107XHJcbiAgICBpZiAobWFudWFsbHlQbGFjZWRTaGlwcy5sZW5ndGggPT09IDQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBsZXQgcG9zaXRpb247XHJcbiAgICBjb25zdCBpbmZvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5pbmZvXCIpO1xyXG4gICAgaW5mbyA9PT0gbnVsbCB8fCBpbmZvID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpbmZvLmNsYXNzTGlzdC5yZW1vdmUoXCJpbmZvXCIpO1xyXG4gICAgaW5mbyA9PT0gbnVsbCB8fCBpbmZvID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpbmZvLmNsYXNzTGlzdC5hZGQoXCJoaWRlXCIpO1xyXG4gICAgY29uc3QgcGxhY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBsYWNlXCIpO1xyXG4gICAgcGxhY2UgPT09IG51bGwgfHwgcGxhY2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBsYWNlLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRlXCIpO1xyXG4gICAgY29uc3QgZ3JpZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ3JpZC1jb250YWluZXJcIik7XHJcbiAgICAvLyBjb25zdCB0aXRsZTEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRpdGxlLTFcIikhO1xyXG4gICAgLy8gdGl0bGUxLnRleHRDb250ZW50ID0gcGxheWVyTmFtZTtcclxuICAgIGNvbnN0IHNoaXBzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zaGlwc1wiKTtcclxuICAgIGNvbnN0IHJvdGF0ZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucm90YXRlXCIpO1xyXG4gICAgY29uc3QgY2FycmllciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FycmllclwiKTtcclxuICAgIGNvbnN0IGRlc3Ryb3llciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZGVzdHJveWVyXCIpO1xyXG4gICAgY29uc3Qgc3VibWFyaW5lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zdWJtYXJpbmVcIik7XHJcbiAgICBjb25zdCBwYXRyb2wgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBhdHJvbFwiKTtcclxuICAgIGlmIChjYWxscyA9PT0gMSkge1xyXG4gICAgICAgIHJvdGF0ZUJ1dHRvbiA9PT0gbnVsbCB8fCByb3RhdGVCdXR0b24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJvdGF0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoY2FycmllciA9PT0gbnVsbCB8fCBjYXJyaWVyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjYXJyaWVyLmNsYXNzTGlzdC5jb250YWlucyhcInJvdGF0ZWRcIikpIHtcclxuICAgICAgICAgICAgICAgIHNoaXBzID09PSBudWxsIHx8IHNoaXBzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzaGlwcy5jbGFzc0xpc3QucmVtb3ZlKFwic2hpcHMtaG9yaXpvbnRhbFwiKTtcclxuICAgICAgICAgICAgICAgIHNoaXBzID09PSBudWxsIHx8IHNoaXBzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzaGlwcy5jbGFzc0xpc3QuYWRkKFwic2hpcHMtdmVydGljYWxcIik7XHJcbiAgICAgICAgICAgICAgICBjYXJyaWVyLmNsYXNzTGlzdC5yZW1vdmUoXCJyb3RhdGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgZGVzdHJveWVyID09PSBudWxsIHx8IGRlc3Ryb3llciA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGVzdHJveWVyLmNsYXNzTGlzdC5yZW1vdmUoXCJyb3RhdGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgc3VibWFyaW5lID09PSBudWxsIHx8IHN1Ym1hcmluZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogc3VibWFyaW5lLmNsYXNzTGlzdC5yZW1vdmUoXCJyb3RhdGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgcGF0cm9sID09PSBudWxsIHx8IHBhdHJvbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGF0cm9sLmNsYXNzTGlzdC5yZW1vdmUoXCJyb3RhdGVkXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc2hpcHMgPT09IG51bGwgfHwgc2hpcHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNoaXBzLmNsYXNzTGlzdC5yZW1vdmUoXCJzaGlwcy12ZXJ0aWNhbFwiKTtcclxuICAgICAgICAgICAgICAgIHNoaXBzID09PSBudWxsIHx8IHNoaXBzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzaGlwcy5jbGFzc0xpc3QuYWRkKFwic2hpcHMtaG9yaXpvbnRhbFwiKTtcclxuICAgICAgICAgICAgICAgIGNhcnJpZXIgPT09IG51bGwgfHwgY2FycmllciA9PT0gdm9pZCAwID8gdm9pZCAwIDogY2Fycmllci5jbGFzc0xpc3QuYWRkKFwicm90YXRlZFwiKTtcclxuICAgICAgICAgICAgICAgIGRlc3Ryb3llciA9PT0gbnVsbCB8fCBkZXN0cm95ZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRlc3Ryb3llci5jbGFzc0xpc3QuYWRkKFwicm90YXRlZFwiKTtcclxuICAgICAgICAgICAgICAgIHN1Ym1hcmluZSA9PT0gbnVsbCB8fCBzdWJtYXJpbmUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHN1Ym1hcmluZS5jbGFzc0xpc3QuYWRkKFwicm90YXRlZFwiKTtcclxuICAgICAgICAgICAgICAgIHBhdHJvbCA9PT0gbnVsbCB8fCBwYXRyb2wgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBhdHJvbC5jbGFzc0xpc3QuYWRkKFwicm90YXRlZFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IHN0YXJ0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zdGFydC1nYW1lXCIpO1xyXG4gICAgICAgIHN0YXJ0QnV0dG9uID09PSBudWxsIHx8IHN0YXJ0QnV0dG9uID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzdGFydEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBncmlkMS5jbGFzc0xpc3QuYWRkKCdoaWRlJylcclxuICAgICAgICAgICAgLy8gcGxhY2UuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICAgICAgcGxhY2UuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgICAgIHJlbmRlckdyaWRzKHBsYXllck5hbWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgY2hlY2tCb2FyZCgpO1xyXG4gICAgLy8gbGV0IGNvdW50OiBhbnkgPSAwO1xyXG4gICAgLy8gZ3JpZC5pbm5lckhUTUwgPSAnJ1xyXG4gICAgLy8gZm9yIChsZXQgaSA9IDA7IGkgPCBoQm9hcmQubGVuZ3RoOyBpKyspIHtcclxuICAgIC8vICAgZm9yIChsZXQgaiA9IDA7IGogPCBoQm9hcmRbaV0ubGVuZ3RoOyBqKyspIHtcclxuICAgIC8vICAgICBjb3VudCsrO1xyXG4gICAgLy8gICAgIGNvbnN0IGdyaWRJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIC8vICAgICBncmlkSXRlbS5zZXRBdHRyaWJ1dGUoXCJkYXRhLWhwb3NpdGlvblwiLCBjb3VudCk7XHJcbiAgICAvLyAgICAgaWYgKCFOdW1iZXIuaXNJbnRlZ2VyKGhCb2FyZFtpXVtqXSkpIHtcclxuICAgIC8vICAgICAgIGdyaWRJdGVtLmNsYXNzTGlzdC5hZGQoXCJzaGlwLWhlcmVcIik7XHJcbiAgICAvLyAgICAgfVxyXG4gICAgLy8gICAgIGdyaWRJdGVtLmNsYXNzTGlzdC5hZGQoXCJncmlkLWl0ZW1cIik7XHJcbiAgICAvLyAgICAgZ3JpZD8uYXBwZW5kQ2hpbGQoZ3JpZEl0ZW0pO1xyXG4gICAgLy8gICB9XHJcbiAgICAvLyB9XHJcbiAgICBjb25zdCByYW5kb21seVBsYWNlID0gKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucmFuZG9tbHktcGxhY2VcIikpO1xyXG4gICAgcmFuZG9tbHlQbGFjZSA9PT0gbnVsbCB8fCByYW5kb21seVBsYWNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiByYW5kb21seVBsYWNlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaHVtYW5TaGlwcy5mb3JFYWNoKChzaGlwKSA9PiB7XHJcbiAgICAgICAgICAgIGh1bWFuLmdhbWVib2FyZC5yYW5kb21seVBsYWNlU2hpcHMoc2hpcCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmFuZG9tbHlQbGFjZS5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgZ3JpZC5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgIGNoZWNrQm9hcmQoKTtcclxuICAgIH0pO1xyXG4gICAgLy8gZnVuY3Rpb24gY2hlY2tCb2FyZCgpIHtcclxuICAgIC8vICAgZ3JpZC5pbm5lckhUTUwgPSAnJ1xyXG4gICAgLy8gICBsZXQgY291bnQ6IGFueSA9IDA7XHJcbiAgICAvLyAgIGZvciAobGV0IGkgPSAwOyBpIDwgaEJvYXJkLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAvLyAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBoQm9hcmRbaV0ubGVuZ3RoOyBqKyspIHtcclxuICAgIC8vICAgICAgIGNvdW50Kys7XHJcbiAgICAvLyAgICAgICBjb25zdCBncmlkSXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAvLyAgICAgICBncmlkSXRlbS5zZXRBdHRyaWJ1dGUoXCJkYXRhLWhwb3NpdGlvblwiLCBjb3VudCk7XHJcbiAgICAvLyAgICAgICAvLyBncmlkSXRlbS50ZXh0Q29udGVudCA9IGJvYXJkW2ldW2pdXHJcbiAgICAvLyAgICAgICBpZiAoIU51bWJlci5pc0ludGVnZXIoaEJvYXJkW2ldW2pdKSkge1xyXG4gICAgLy8gICAgICAgICBncmlkSXRlbS5jbGFzc0xpc3QuYWRkKFwic2hpcC1oZXJlXCIpO1xyXG4gICAgLy8gICAgICAgfVxyXG4gICAgLy8gICAgICAgZ3JpZEl0ZW0uY2xhc3NMaXN0LmFkZChcImdyaWQtaXRlbVwiKTtcclxuICAgIC8vICAgICAgIGdyaWQ/LmFwcGVuZENoaWxkKGdyaWRJdGVtKTtcclxuICAgIC8vICAgICB9XHJcbiAgICAvLyAgIH1cclxuICAgIC8vICAgLy8gZXZlbnRzKCk7XHJcbiAgICAvLyB9XHJcbiAgICBmdW5jdGlvbiBjaGVja0JvYXJkKCkge1xyXG4gICAgICAgIGxldCBjb3VudCA9IDA7XHJcbiAgICAgICAgZ3JpZC5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhCb2FyZC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGhCb2FyZFtpXS5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgY291bnQrKztcclxuICAgICAgICAgICAgICAgIGNvbnN0IGdyaWRJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICAgICAgICAgIGdyaWRJdGVtLnNldEF0dHJpYnV0ZShcImRhdGEtaHBvc2l0aW9uXCIsIGNvdW50KTtcclxuICAgICAgICAgICAgICAgIGlmICghTnVtYmVyLmlzSW50ZWdlcihoQm9hcmRbaV1bal0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ3JpZEl0ZW0uY2xhc3NMaXN0LmFkZChcInNoaXAtaGVyZVwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGdyaWRJdGVtLmNsYXNzTGlzdC5hZGQoXCJncmlkLWl0ZW1cIik7XHJcbiAgICAgICAgICAgICAgICBncmlkID09PSBudWxsIHx8IGdyaWQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGdyaWQuYXBwZW5kQ2hpbGQoZ3JpZEl0ZW0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gfVxyXG4gICAgZXZlbnRzKCk7XHJcbiAgICBsZXQgY291bnRlciA9IDA7XHJcbiAgICBmdW5jdGlvbiBldmVudHMoKSB7XHJcbiAgICAgICAgY29uc3QgZHJhZ2dhYmxlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZHJhZ2dhYmxlXCIpO1xyXG4gICAgICAgIGRyYWdnYWJsZXMuZm9yRWFjaCgoZHJhZ2dhYmxlKSA9PiB7XHJcbiAgICAgICAgICAgIGRyYWdnYWJsZS5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ3N0YXJ0XCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGRyYWdnYWJsZS5jbGFzc0xpc3QuYWRkKCdkcmFnZ2luZycpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZHJhZ2dhYmxlLmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnZW5kXCIsIChldikgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZXYudGFyZ2V0KVxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2hpcEVsZW1lbnQgPSBldi50YXJnZXQ7XHJcbiAgICAgICAgICAgICAgICBldjtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHBvc2l0aW9uKVxyXG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFBvcyA9IHBhcnNlSW50KHBvc2l0aW9uLmRhdGFzZXQuaHBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGN1cnJlbnRQb3MpXHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhzaGlwLmlkKVxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2hpcE5hbWUgPSBzaGlwRWxlbWVudC5pZDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnQgPSBbc2hpcE5hbWUsIGN1cnJlbnRQb3NdO1xyXG4gICAgICAgICAgICAgICAgbWFudWFsbHlQbGFjZWRTaGlwcy5wdXNoKGN1cnJlbnQpO1xyXG4gICAgICAgICAgICAgICAgLy8gcGxhY2VTaGlwRHJhZ2dlZChjdXJyZW50UG9zLCBzaGlwTmFtZSlcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGhCb2FyZClcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG1hbnVhbGx5UGxhY2VkU2hpcHMpO1xyXG4gICAgICAgICAgICAgICAgcGxhY2VTaGlwRHJhZ2dlZChtYW51YWxseVBsYWNlZFNoaXBzLCBjb3VudGVyKTtcclxuICAgICAgICAgICAgICAgIC8vIGNvdW50ZXIrK1xyXG4gICAgICAgICAgICAgICAgLy8gY2hlY2tQbGFjZWQobWFudWFsbHlQbGFjZWRTaGlwcylcclxuICAgICAgICAgICAgICAgIC8vIGdyaWQxLmlubmVySFRNTCA9ICcnXHJcbiAgICAgICAgICAgICAgICAvLyBjaGVja0JvYXJkKClcclxuICAgICAgICAgICAgICAgIC8vIGNvbnN0IGl0ZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBkaXZbaHBvc2l0aW9uPVwiJHtjdXJyZW50UG9zfVwiXWApXHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhpdGVtKVxyXG4gICAgICAgICAgICAgICAgY291bnRlcisrO1xyXG4gICAgICAgICAgICAgICAgcGxhY2VTaGlwKHBsYXllck5hbWUpO1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coaEJvYXJkKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCBncmlkSXRlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZ3JpZC1pdGVtXCIpO1xyXG4gICAgICAgIGdyaWRJdGVtLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdvdmVyXCIsIChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbiA9IGUudGFyZ2V0O1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocG9zaXRpb24pXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gaXNWYWxpZChwb3NpdGlvbiwgbmFtZSkge1xyXG4gICAgICAgIGxldCBkaXJlY3Rpb24gPSBmYWxzZTtcclxuICAgICAgICBpZiAoY2Fycmllci5jbGFzc0xpc3QuY29udGFpbnMoXCJyb3RhdGVkXCIpKSB7XHJcbiAgICAgICAgICAgIGRpcmVjdGlvbiA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChuYW1lID09PSBcImNhcnJpZXJcIikge1xyXG4gICAgICAgICAgICBodW1hbi5nYW1lYm9hcmQudmFsaWRQbGFjZW1lbnQocG9zaXRpb24sIDUsIGRpcmVjdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gcGxhY2VTaGlwRHJhZ2dlZChhcnIsIGNvdW50KSB7XHJcbiAgICAgICAgaWYgKGFycltjb3VudF1bMF0gPT09IFwiY2FycmllclwiKSB7XHJcbiAgICAgICAgICAgIGlmIChjYXJyaWVyLmNsYXNzTGlzdC5jb250YWlucyhcInJvdGF0ZWRcIikpIHtcclxuICAgICAgICAgICAgICAgIGh1bWFuLmdhbWVib2FyZC5wbGFjZVNoaXAoaENhcnJpZXIsIGFycltjb3VudF1bMV0sIGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGh1bWFuLmdhbWVib2FyZC5wbGFjZVNoaXAoaENhcnJpZXIsIGFycltjb3VudF1bMV0sIHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChhcnJbY291bnRdWzBdID09PSBcImRlc3Ryb3llclwiKSB7XHJcbiAgICAgICAgICAgIGlmIChjYXJyaWVyLmNsYXNzTGlzdC5jb250YWlucyhcInJvdGF0ZWRcIikpIHtcclxuICAgICAgICAgICAgICAgIGh1bWFuLmdhbWVib2FyZC5wbGFjZVNoaXAoaERlc3Ryb3llciwgYXJyW2NvdW50XVsxXSwgZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaHVtYW4uZ2FtZWJvYXJkLnBsYWNlU2hpcChoRGVzdHJveWVyLCBhcnJbY291bnRdWzFdLCB0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYXJyW2NvdW50XVswXSA9PT0gXCJzdWJtYXJpbmVcIikge1xyXG4gICAgICAgICAgICBpZiAoY2Fycmllci5jbGFzc0xpc3QuY29udGFpbnMoXCJyb3RhdGVkXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBodW1hbi5nYW1lYm9hcmQucGxhY2VTaGlwKGhTdWJtYXJpbmUsIGFycltjb3VudF1bMV0sIGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGh1bWFuLmdhbWVib2FyZC5wbGFjZVNoaXAoaFN1Ym1hcmluZSwgYXJyW2NvdW50XVsxXSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGFycltjb3VudF1bMF0gPT09IFwicGF0cm9sXCIpIHtcclxuICAgICAgICAgICAgaWYgKGNhcnJpZXIuY2xhc3NMaXN0LmNvbnRhaW5zKFwicm90YXRlZFwiKSkge1xyXG4gICAgICAgICAgICAgICAgaHVtYW4uZ2FtZWJvYXJkLnBsYWNlU2hpcChoUGF0cm9sLCBhcnJbY291bnRdWzFdLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBodW1hbi5nYW1lYm9hcmQucGxhY2VTaGlwKGhQYXRyb2wsIGFycltjb3VudF1bMV0sIHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGV2ZW50cygpXHJcbiAgICAgICAgLy8gZ3JpZDEuaW5uZXJIVE1MID0gJydcclxuICAgICAgICAvLyBjaGVja0JvYXJkKCk7XHJcbiAgICAgICAgLy8gcGxhY2VTaGlwKHBsYXllck5hbWUpXHJcbiAgICB9XHJcbiAgICAvLyBmdW5jdGlvbiBjaGVja1BsYWNlZChhcnI6IGFueSl7XHJcbiAgICAvLyAgICAgaWYoYXJyLmxlbmd0aCA9PT0gNCl7XHJcbiAgICAvLyAgICAgICAgIGFyci5mb3JFYWNoKChpdGVtOiBhbnkpID0+IHtcclxuICAgIC8vICAgICAgICAgICAgIHBsYWNlU2hpcERyYWdnZWQoaXRlbVsxXSwgaXRlbVswXSlcclxuICAgIC8vICAgICAgICAgfSlcclxuICAgIC8vICAgICAgICAgY29uc29sZS5sb2coaEJvYXJkKVxyXG4gICAgLy8gICAgICAgICBncmlkMS5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgLy8gICAgICAgICBjaGVja0JvYXJkKClcclxuICAgIC8vICAgICB9XHJcbiAgICAvLyAgICAgZWxzZXtcclxuICAgIC8vICAgICAgICAgcmV0dXJuXHJcbiAgICAvLyAgICAgfVxyXG4gICAgLy8gICB9XHJcbn1cclxuZXhwb3J0IHsgaHVtYW5TaGlwcywgY29tcHV0ZXJTaGlwcywgaHVtYW4sIGNvbXB1dGVyLCBoQm9hcmQsIGNCb2FyZCB9O1xyXG4iLCJpbXBvcnQgeyBjb21wdXRlclNoaXBzLCBodW1hbiwgY29tcHV0ZXIsIGhCb2FyZCwgY0JvYXJkIH0gZnJvbSBcIi4uL3VpL3BsYWNlU2hpcFwiO1xyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiByZW5kZXJHcmlkcyhwbGF5ZXJOYW1lKSB7XHJcbiAgICBjb25zdCBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImJvZHlcIik7XHJcbiAgICBjb25zb2xlLmxvZyhoQm9hcmQpO1xyXG4gICAgLy8gY29uc3QgaW5mbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaW5mb1wiKTtcclxuICAgIC8vIGluZm8/LmNsYXNzTGlzdC5yZW1vdmUoXCJpbmZvXCIpO1xyXG4gICAgLy8gaW5mbz8uY2xhc3NMaXN0LmFkZChcImhpZGVcIik7XHJcbiAgICBjb25zdCBwbGFjZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wbGFjZScpO1xyXG4gICAgcGxhY2UgPT09IG51bGwgfHwgcGxhY2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBsYWNlLmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTtcclxuICAgIGNvbnN0IG1haW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21haW5cIik7XHJcbiAgICBtYWluLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRlXCIpO1xyXG4gICAgbWFpbi5jbGFzc0xpc3QuYWRkKFwibWFpblwiKTtcclxuICAgIGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRlbnRcIik7XHJcbiAgICBjb25zdCBncmlkQ29udGFpbmVyMSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ3JpZDFcIik7XHJcbiAgICBjb25zdCBncmlkMSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ3JpZC1jb250YWluZXIxXCIpO1xyXG4gICAgY29uc3QgdGl0bGUxID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50aXRsZS0xXCIpO1xyXG4gICAgdGl0bGUxLnRleHRDb250ZW50ID0gcGxheWVyTmFtZTtcclxuICAgIGNvbnN0IHN1bmtlbjEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnN1bmtlbjFcIik7XHJcbiAgICBjb25zdCBncmlkQ29udGFpbmVyMiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ3JpZDJcIik7XHJcbiAgICBjb25zdCBncmlkMiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ3JpZC1jb250YWluZXIyXCIpO1xyXG4gICAgY29uc3QgdGl0bGUyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50aXRsZS0yXCIpO1xyXG4gICAgdGl0bGUyLnRleHRDb250ZW50ID0gXCJDb21wdXRlclwiO1xyXG4gICAgY29uc3Qgc3Vua2VuMiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc3Vua2VuMlwiKTtcclxuICAgIGNvbnN0IHdob1dvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIud2hvLXdvblwiKTtcclxuICAgIGNvbnN0IHJlc3RhcnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgcmVzdGFydC5jbGFzc0xpc3QuYWRkKFwicmVzdGFydFwiKTtcclxuICAgIHJlc3RhcnQudGV4dENvbnRlbnQgPSBcIlJlc3RhcnRcIjtcclxuICAgIHJlc3RhcnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgIH0pO1xyXG4gICAgLy8gbGV0IGh1bWFuID0gbmV3IFBsYXllcihcImh1bWFuXCIsIFwiY29tcHV0ZXJcIik7XHJcbiAgICAvLyBsZXQgY29tcHV0ZXIgPSBuZXcgUGxheWVyKFwiY29tcHV0ZXJcIiwgXCJodW1hblwiKTtcclxuICAgIC8vIGxldCBoQm9hcmQgPSBodW1hbi5nYW1lYm9hcmQuYm9hcmQ7XHJcbiAgICAvLyBsZXQgY0JvYXJkID0gY29tcHV0ZXIuZ2FtZWJvYXJkLmJvYXJkO1xyXG4gICAgLy8gbGV0IGhDYXJyaWVyID0gbmV3IFNoaXAoNSwgXCJjYXJyaWVyXCIpO1xyXG4gICAgLy8gbGV0IGhEZXN0cm95ZXIgPSBuZXcgU2hpcCg0LCBcImRlc3Ryb3llclwiKTtcclxuICAgIC8vIGxldCBoU3VibWFyaW5lID0gbmV3IFNoaXAoMywgXCJzdWJtYXJpbmVcIik7XHJcbiAgICAvLyBsZXQgaFBhdHJvbCA9IG5ldyBTaGlwKDIsIFwicGF0cm9sXCIpO1xyXG4gICAgLy8gbGV0IGNDYXJyaWVyID0gbmV3IFNoaXAoNSwgXCJjYXJyaWVyXCIpO1xyXG4gICAgLy8gbGV0IGNEZXN0cm95ZXIgPSBuZXcgU2hpcCg0LCBcImRlc3Ryb3llclwiKTtcclxuICAgIC8vIGxldCBjU3VibWFyaW5lID0gbmV3IFNoaXAoMywgXCJzdWJtYXJpbmVcIik7XHJcbiAgICAvLyBsZXQgY1BhdHJvbCA9IG5ldyBTaGlwKDIsIFwicGF0cm9sXCIpO1xyXG4gICAgLy8gY29uc3QgaHVtYW5TaGlwcyA9IFtoQ2FycmllciwgaERlc3Ryb3llciwgaFN1Ym1hcmluZSwgaFBhdHJvbF07XHJcbiAgICAvLyBjb25zdCBjb21wdXRlclNoaXBzID0gW2NDYXJyaWVyLCBjRGVzdHJveWVyLCBjU3VibWFyaW5lLCBjUGF0cm9sXTtcclxuICAgIC8vIGFsbFNoaXBzLmZvckVhY2goc2hpcCA9PiB7XHJcbiAgICAvLyAgICAgY29tcHV0ZXIuZ2FtZWJvYXJkLnJhbmRvbWx5UGxhY2VTaGlwcyhzaGlwKTtcclxuICAgIC8vICAgICBodW1hbi5nYW1lYm9hcmQucmFuZG9tbHlQbGFjZVNoaXBzKHNoaXApO1xyXG4gICAgLy8gfSlcclxuICAgIGNvbXB1dGVyU2hpcHMuZm9yRWFjaCgoc2hpcCkgPT4ge1xyXG4gICAgICAgIGNvbXB1dGVyLmdhbWVib2FyZC5yYW5kb21seVBsYWNlU2hpcHMoc2hpcCk7XHJcbiAgICB9KTtcclxuICAgIC8vIGh1bWFuU2hpcHMuZm9yRWFjaCgoc2hpcCkgPT4ge1xyXG4gICAgLy8gICBodW1hbi5nYW1lYm9hcmQucmFuZG9tbHlQbGFjZVNoaXBzKHNoaXApO1xyXG4gICAgLy8gfSk7XHJcbiAgICBsZXQgY291bnQgPSAwO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBoQm9hcmQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGhCb2FyZFtpXS5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICBjb3VudCsrO1xyXG4gICAgICAgICAgICBjb25zdCBncmlkSXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgIGdyaWRJdGVtLnNldEF0dHJpYnV0ZShcImhwb3NpdGlvblwiLCBjb3VudCk7XHJcbiAgICAgICAgICAgIC8vIGdyaWRJdGVtLnRleHRDb250ZW50ID0gYm9hcmRbaV1bal1cclxuICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNJbnRlZ2VyKGhCb2FyZFtpXVtqXSkpIHtcclxuICAgICAgICAgICAgICAgIGdyaWRJdGVtLmNsYXNzTGlzdC5hZGQoXCJzaGlwLWhlcmVcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZ3JpZEl0ZW0uY2xhc3NMaXN0LmFkZChcImdyaWQtaXRlbVwiKTtcclxuICAgICAgICAgICAgZ3JpZDEgPT09IG51bGwgfHwgZ3JpZDEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGdyaWQxLmFwcGVuZENoaWxkKGdyaWRJdGVtKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNCb2FyZC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgY0JvYXJkW2ldLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGdyaWRJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICAgICAgZ3JpZEl0ZW0uc2V0QXR0cmlidXRlKFwiY3Bvc2l0aW9uXCIsIGNCb2FyZFtpXVtqXSk7XHJcbiAgICAgICAgICAgIC8vIGdyaWRJdGVtLnRleHRDb250ZW50ID0gYm9hcmRbaV1bal1cclxuICAgICAgICAgICAgZ3JpZEl0ZW0uY2xhc3NMaXN0LmFkZChcImdyaWQtaXRlbVwiKTtcclxuICAgICAgICAgICAgZ3JpZEl0ZW0uY2xhc3NMaXN0LmFkZChcImFpLWdyaWRcIik7XHJcbiAgICAgICAgICAgIGdyaWRJdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZ3JpZEl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKFwiaGl0XCIpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgZ3JpZEl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKFwibWlzc1wiKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgIGh1bWFuLmdhbWVib2FyZC5pc092ZXIoKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbXB1dGVyLmdhbWVib2FyZC5pc092ZXIoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICghTnVtYmVyLmlzSW50ZWdlcihjQm9hcmRbaV1bal0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ3JpZEl0ZW0uY2xhc3NMaXN0LmFkZChcImhpdFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgaXNTdW5rID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgY29tcHV0ZXIuZ2FtZWJvYXJkLnJlY2lldmVBdHRhY2soaSwgaik7XHJcbiAgICAgICAgICAgICAgICAgICAgY29tcHV0ZXIuZ2FtZWJvYXJkLnBsYWNlZFNoaXBzLmZvckVhY2goKHNoaXApID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNoaXAubmFtZSA9PT0gY0JvYXJkW2ldW2pdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1N1bmsgPSBzaGlwLnN1bms7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNTdW5rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1bmtlbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoMlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3Vua2VuLnRleHRDb250ZW50ID0gY0JvYXJkW2ldW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdW5rZW4yID09PSBudWxsIHx8IHN1bmtlbjIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHN1bmtlbjIuYXBwZW5kQ2hpbGQoc3Vua2VuKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbXB1dGVyLmdhbWVib2FyZC5pc092ZXIoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgd2lubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgxXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lubmVyLnRleHRDb250ZW50ID0gXCJXaW5uZXI6IFwiICsgcGxheWVyTmFtZSArIFwiIVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hvV29uID09PSBudWxsIHx8IHdob1dvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogd2hvV29uLmFwcGVuZENoaWxkKHdpbm5lcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aG9Xb24gPT09IG51bGwgfHwgd2hvV29uID09PSB2b2lkIDAgPyB2b2lkIDAgOiB3aG9Xb24uYXBwZW5kQ2hpbGQocmVzdGFydCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBncmlkSXRlbS5jbGFzc0xpc3QuYWRkKFwibWlzc1wiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGxldCBwb3NpdGlvbjtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uID0gY29tcHV0ZXIucmFuZG9tQXR0YWNrKGh1bWFuKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbaHBvc2l0aW9uPVwiJHtwb3NpdGlvbn1cIl1gKTtcclxuICAgICAgICAgICAgICAgIGxldCB0ZW1wID0gcG9zaXRpb247XHJcbiAgICAgICAgICAgICAgICBsZXQgbmV3UG9zaXRpb24gPSBodW1hbi5nYW1lYm9hcmQuY29udmVydFBvc2l0aW9uKHRlbXApO1xyXG4gICAgICAgICAgICAgICAgbGV0IHJvdyA9IGh1bWFuLmdhbWVib2FyZC5nZXRSb3cobmV3UG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgbGV0IGNvbCA9IGh1bWFuLmdhbWVib2FyZC5nZXRDb2wobmV3UG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNJbnRlZ2VyKGh1bWFuLmdhbWVib2FyZC5ib2FyZFtyb3ddW2NvbF0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbSA9PT0gbnVsbCB8fCBpdGVtID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ3NoaXAtaGVyZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0gPT09IG51bGwgfHwgaXRlbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogaXRlbS5jbGFzc0xpc3QuYWRkKFwiaGl0XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBpc1N1bmsxID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgaHVtYW4uZ2FtZWJvYXJkLnJlY2lldmVBdHRhY2soaSwgaik7XHJcbiAgICAgICAgICAgICAgICAgICAgaHVtYW4uZ2FtZWJvYXJkLnBsYWNlZFNoaXBzLmZvckVhY2goKHNoaXApID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNoaXAubmFtZSA9PT0gaEJvYXJkW3Jvd11bY29sXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNTdW5rMSA9IHNoaXAuc3VuaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1N1bmsxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1bmtlbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoMlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3Vua2VuLnRleHRDb250ZW50ID0gaEJvYXJkW3Jvd11bY29sXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3Vua2VuMSA9PT0gbnVsbCB8fCBzdW5rZW4xID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzdW5rZW4xLmFwcGVuZENoaWxkKHN1bmtlbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChodW1hbi5nYW1lYm9hcmQuaXNPdmVyKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHdpbm5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoMVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbm5lci50ZXh0Q29udGVudCA9IFwiV2lubmVyOiBDb21wdXRlciFcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdob1dvbiA9PT0gbnVsbCB8fCB3aG9Xb24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHdob1dvbi5hcHBlbmRDaGlsZCh3aW5uZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hvV29uID09PSBudWxsIHx8IHdob1dvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogd2hvV29uLmFwcGVuZENoaWxkKHJlc3RhcnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbSA9PT0gbnVsbCB8fCBpdGVtID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpdGVtLmNsYXNzTGlzdC5hZGQoXCJtaXNzXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZ3JpZDIgPT09IG51bGwgfHwgZ3JpZDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGdyaWQyLmFwcGVuZENoaWxkKGdyaWRJdGVtKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHBsYWNlU2hpcCBmcm9tIFwiLi9wbGFjZVNoaXBcIjtcclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc3RhcnRHYW1lKCkge1xyXG4gICAgY29uc3QgaW5mbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaW5mb1wiKTtcclxuICAgIGNvbnN0IGlucHV0Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIGlucHV0Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJpbnB1dC1jb250YWluZXJcIik7XHJcbiAgICBjb25zdCBuYW1lTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XHJcbiAgICBuYW1lTGFiZWwudGV4dENvbnRlbnQgPSBcIkVudGVyIE5hbWU6XCI7XHJcbiAgICBjb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XHJcbiAgICBuYW1lSW5wdXQuY2xhc3NMaXN0LmFkZChcIm5hbWUtaW5wdXRcIik7XHJcbiAgICBjb25zdCBzdGFydEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICBzdGFydEJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwic3RhcnQtYnV0dG9uXCIpO1xyXG4gICAgc3RhcnRCdXR0b24udGV4dENvbnRlbnQgPSBcIlN0YXJ0XCI7XHJcbiAgICBpbnB1dENvbnRhaW5lci5hcHBlbmRDaGlsZChuYW1lTGFiZWwpO1xyXG4gICAgaW5wdXRDb250YWluZXIuYXBwZW5kQ2hpbGQobmFtZUlucHV0KTtcclxuICAgIGlucHV0Q29udGFpbmVyLmFwcGVuZENoaWxkKHN0YXJ0QnV0dG9uKTtcclxuICAgIGluZm8gPT09IG51bGwgfHwgaW5mbyA9PT0gdm9pZCAwID8gdm9pZCAwIDogaW5mby5hcHBlbmRDaGlsZChpbnB1dENvbnRhaW5lcik7XHJcbiAgICBzdGFydEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmIChuYW1lSW5wdXQudmFsdWUgIT09IFwiXCIpIHtcclxuICAgICAgICAgICAgY29uc3QgbmFtZSA9IG5hbWVJbnB1dC52YWx1ZTtcclxuICAgICAgICAgICAgaW5mbyA9PT0gbnVsbCB8fCBpbmZvID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpbmZvLnJlbW92ZUNoaWxkKGlucHV0Q29udGFpbmVyKTtcclxuICAgICAgICAgICAgcGxhY2VTaGlwKG5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgbmFtZSA9IFwiVG8gbGF6eSB0byBlbnRlciBhIG5hbWVcIjtcclxuICAgICAgICAgICAgaW5mbyA9PT0gbnVsbCB8fCBpbmZvID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpbmZvLnJlbW92ZUNoaWxkKGlucHV0Q29udGFpbmVyKTtcclxuICAgICAgICAgICAgcGxhY2VTaGlwKG5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcbiIsImltcG9ydCBzdGFydEdhbWUgZnJvbSBcIi4vdWkvc3RhcnRHYW1lXCI7XHJcbnN0YXJ0R2FtZSgpO1xyXG4vLyByZW5kZXJHcmlkcygnampjcmF6eW1hbicpXHJcbiJdLCJuYW1lcyI6WyJHYW1lQm9hcmQiLCJjb25zdHJ1Y3RvciIsInRoaXMiLCJib2FyZCIsImNyZWF0ZUJvYXJkIiwiaGl0cyIsIm1pc3NlcyIsInBsYWNlZFNoaXBzIiwiZ2FtZU92ZXIiLCJzdW5rU2hpcHMiLCJjb3VudCIsImkiLCJqIiwicGxhY2VTaGlwIiwic2hpcCIsInN0YXJ0IiwidmVydGljYWwiLCJ2YWxpZFBsYWNlbWVudCIsImxlbmd0aCIsImluY2x1ZGVzIiwiaW5kZXgiLCJpbmRleE9mIiwibmFtZSIsInB1c2giLCJyZWNpZXZlQXR0YWNrIiwicm93IiwiY29sdW1uIiwicG9zaXRpb24iLCJOdW1iZXIiLCJpc0ludGVnZXIiLCJmb3JFYWNoIiwiaGl0IiwiaXNTdW5rIiwiaXNPdmVyIiwiaXNWZXJ0aWNhbCIsIm5ld1Bvc2l0aW9uIiwiY29udmVydFBvc2l0aW9uIiwiZ2V0Um93IiwiZ2V0Q29sIiwicmFuZG9tbHlQbGFjZVNoaXBzIiwiZGlyZWN0aW9uIiwidmFsaWQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJzdHIiLCJ0b1N0cmluZyIsInBhcnNlSW50Iiwic2xpY2UiLCJQbGF5ZXIiLCJvcG9uZW50IiwiZ2FtZWJvYXJkIiwic2hvdHMiLCJhdHRhY2siLCJjb2wiLCJyYW5kb21BdHRhY2siLCJvcHBvbmVudCIsInZhbGlkU2hvdCIsIlNoaXAiLCJpc0hpdCIsInN1bmsiLCJodW1hbiIsImNvbXB1dGVyIiwiaEJvYXJkIiwiY0JvYXJkIiwiaENhcnJpZXIiLCJoRGVzdHJveWVyIiwiaFN1Ym1hcmluZSIsImhQYXRyb2wiLCJjQ2FycmllciIsImNEZXN0cm95ZXIiLCJjU3VibWFyaW5lIiwiY1BhdHJvbCIsImh1bWFuU2hpcHMiLCJjb21wdXRlclNoaXBzIiwiY2FsbHMiLCJwbGF5ZXJOYW1lIiwibWFudWFsbHlQbGFjZWRTaGlwcyIsImluZm8iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJhZGQiLCJwbGFjZSIsImdyaWQiLCJzaGlwcyIsInJvdGF0ZUJ1dHRvbiIsImNhcnJpZXIiLCJkZXN0cm95ZXIiLCJzdWJtYXJpbmUiLCJwYXRyb2wiLCJhZGRFdmVudExpc3RlbmVyIiwiY29udGFpbnMiLCJzdGFydEJ1dHRvbiIsImlubmVySFRNTCIsImNvbnNvbGUiLCJsb2ciLCJtYWluIiwiZ3JpZDEiLCJ0ZXh0Q29udGVudCIsInN1bmtlbjEiLCJncmlkMiIsInN1bmtlbjIiLCJ3aG9Xb24iLCJyZXN0YXJ0IiwiY3JlYXRlRWxlbWVudCIsImxvY2F0aW9uIiwicmVsb2FkIiwiZ3JpZEl0ZW0iLCJzZXRBdHRyaWJ1dGUiLCJhcHBlbmRDaGlsZCIsInN1bmtlbiIsIndpbm5lciIsIml0ZW0iLCJ0ZW1wIiwiaXNTdW5rMSIsInJlbmRlckdyaWRzIiwiY2hlY2tCb2FyZCIsInJhbmRvbWx5UGxhY2UiLCJkaXNhYmxlZCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJkcmFnZ2FibGUiLCJldiIsInNoaXBFbGVtZW50IiwidGFyZ2V0IiwiY3VycmVudFBvcyIsImRhdGFzZXQiLCJocG9zaXRpb24iLCJjdXJyZW50IiwiaWQiLCJhcnIiLCJjb3VudGVyIiwiZSIsImlucHV0Q29udGFpbmVyIiwibmFtZUxhYmVsIiwibmFtZUlucHV0IiwidmFsdWUiLCJyZW1vdmVDaGlsZCIsInN0YXJ0R2FtZSJdLCJzb3VyY2VSb290IjoiIn0=