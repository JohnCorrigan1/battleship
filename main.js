(()=>{"use strict";class t{constructor(){this.board=[],this.createBoard(),this.hits=[],this.misses=[],this.placedShips=[],this.gameOver=!1}createBoard(){let t=0;for(let e=0;e<10;e++){this.board[e]=[];for(let s=0;s<10;s++)t++,this.board[e][s]=t}}placeShip(t,e,s){if(s&&!0===this.validPlacement(e,t.length,!0)){for(let s=0;s<t.length;s++){for(let s=0;s<this.board.length;s++)if(this.board[s].includes(e)){let i=this.board[s].indexOf(e);this.board[s][i]=t.name}e+=10}this.placedShips.push(t)}else if(!s&&!0===this.validPlacement(e,t.length,!1)){for(let s=0;s<t.length;s++){for(let s=0;s<this.board.length;s++)if(this.board[s].includes(e)){let i=this.board[s].indexOf(e);this.board[s][i]=t.name}e+=1}this.placedShips.push(t)}}recieveAttack(t){let e,s,i=t.toString();t<11?(e=t-1,s=0):100===t?(s=9,e=9):(s=parseInt(i.slice(0,1)),e=parseInt(i.slice(1,2))-1),Number.isInteger(this.board[s][e])?this.misses.push(t):(this.hits.push(t),this.placedShips.forEach((i=>{if(i.name===this.board[s][e])return i.hit(t),void i.isSunk()})))}isOver(){for(let t=0;t<this.placedShips.length;t++)if(this.placedShips[t].sunk=!1)return!1;return!0}validPlacement(t,e,s){let i,n,r=t.toString();if(t<11)i=t-1,n=0;else{if(100===t)return!1;n=parseInt(r.slice(0,1)),i=t%10==0?9:parseInt(r.slice(1,2))}let a=n;return console.log(n,i),console.log("string"==typeof this.board[a][i]),!!(s&&n+e-1<10)||!s&&i+e-1<10}randomlyPlaceShips(t){let e,s,i=!1;for(;!i;){if(e=Math.floor(100*Math.random())+1,s=Math.random()<.5,this.validPlacement(e,t.length,s))return this.placeShip(t,e,s),void(i=!0);i=!1}}}class e{constructor(e,s){this.gameboard=new t,this.name=e,this.shots=[],this.oponent=s}attack(t,e){this.shots.includes(t)||(this.shots.push(t),e.gameboard.recieveAttack(t),e.gameboard.isOver())}randomAttack(t){let e,s=!1;for(;!s;)e=Math.floor(100*Math.random())+1,this.shots.includes(e)||(console.log(e),this.shots.push(e),t.gameboard.recieveAttack(e),s=!0)}}class s{constructor(t,e){this.length=t,this.isHit=[],this.sunk=!1,this.name=e}hit(t){if(!this.isHit.includes(t)&&this.isHit.length<this.length)return this.isHit.push(t),this.isHit}isSunk(){return this.isHit.length===this.length&&(this.sunk=!0,!0)}}function i(t){document.querySelector("body");const i=document.querySelector(".grid-container1");document.querySelector(".title-1").textContent=t;const n=document.querySelector(".grid-container2");document.querySelector(".title-2").textContent="Computer";let r=new e("human","computer"),a=new e("computer","human"),o=r.gameboard.board;[new s(5,"carrier"),new s(4,"destroyer"),new s(3,"submarine"),new s(2,"patrol")].forEach((t=>{a.gameboard.randomlyPlaceShips(t),r.gameboard.randomlyPlaceShips(t)}));for(let t=0;t<o.length;t++)for(let e=0;e<o[t].length;e++){const s=document.createElement("div");s.setAttribute("position",o[t][e]),s.textContent=o[t][e],Number.isInteger(o[t][e])||s.classList.add("ship-here"),s.classList.add("grid-item"),null==i||i.appendChild(s)}for(let t=0;t<o.length;t++)for(let e=0;e<o[t].length;e++){const s=document.createElement("div");s.setAttribute("position",o[t][e]),s.classList.add("grid-item"),s.classList.add("ai-grid"),s.addEventListener("click",(function(){Number.isInteger(o[t][e])?s.classList.add("miss"):s.classList.add("hit")})),null==n||n.appendChild(s)}document.querySelectorAll(".grid-item")}!function(){const t=document.querySelector(".info"),e=document.createElement("div");e.classList.add("input-container");const s=document.createElement("label");s.textContent="Enter Name:";const n=document.createElement("input");n.classList.add("name-input");const r=document.createElement("button");r.classList.add("start-button"),r.textContent="Start",e.appendChild(s),e.appendChild(n),e.appendChild(r),null==t||t.appendChild(e),r.addEventListener("click",(function(){if(""!==n.value){const s=n.value;null==t||t.removeChild(e),i(s)}else{const s="To lazy to enter a name";null==t||t.removeChild(e),i(s)}}))}()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQVVFLE1BQWMsQ0FDeEIsTUFBTTNELEVBQU95RCxFQUFVRSxNQUN2QkwsU0FBNENBLEVBQUtNLFlBQVlMLEdBQzdEbEIsRUFBWXJDLEVBQ2hCLEtBQ0ssQ0FDRCxNQUFNQSxFQUFPLDBCQUNic0QsU0FBNENBLEVBQUtNLFlBQVlMLEdBQzdEbEIsRUFBWXJDLEVBQ2hCLENBQ0osR0FDSixDQzNCQTZELEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2ZhY3Rvcmllcy9nYW1lYm9hcmQudHMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9mYWN0b3JpZXMvcGxheWVycy50cyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2ZhY3Rvcmllcy9zaGlwLnRzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvdWkvcmVuZGVyR2FtZUJvYXJkcy50cyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL3VpL3N0YXJ0R2FtZS50cyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGltcG9ydCB7IFNoaXAgfSBmcm9tICcuL3NoaXAnXHJcbmV4cG9ydCBjbGFzcyBHYW1lQm9hcmQge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5ib2FyZCA9IFtdO1xyXG4gICAgICAgIHRoaXMuY3JlYXRlQm9hcmQoKTtcclxuICAgICAgICB0aGlzLmhpdHMgPSBbXTtcclxuICAgICAgICB0aGlzLm1pc3NlcyA9IFtdO1xyXG4gICAgICAgIHRoaXMucGxhY2VkU2hpcHMgPSBbXTtcclxuICAgICAgICB0aGlzLmdhbWVPdmVyID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBjcmVhdGVCb2FyZCgpIHtcclxuICAgICAgICBsZXQgY291bnQgPSAwO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLmJvYXJkW2ldID0gW107XHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgMTA7IGorKykge1xyXG4gICAgICAgICAgICAgICAgY291bnQrKztcclxuICAgICAgICAgICAgICAgIHRoaXMuYm9hcmRbaV1bal0gPSBjb3VudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHBsYWNlU2hpcChzaGlwLCBzdGFydCwgdmVydGljYWwpIHtcclxuICAgICAgICBpZiAodmVydGljYWwgJiYgdGhpcy52YWxpZFBsYWNlbWVudChzdGFydCwgc2hpcC5sZW5ndGgsIHRydWUpID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmJvYXJkLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYm9hcmRbal0uaW5jbHVkZXMoc3RhcnQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbmRleCA9IHRoaXMuYm9hcmRbal0uaW5kZXhPZihzdGFydCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYm9hcmRbal1baW5kZXhdID0gc2hpcC5uYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHN0YXJ0ICs9IDEwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMucGxhY2VkU2hpcHMucHVzaChzaGlwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoIXZlcnRpY2FsICYmIHRoaXMudmFsaWRQbGFjZW1lbnQoc3RhcnQsIHNoaXAubGVuZ3RoLCBmYWxzZSkgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuYm9hcmQubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5ib2FyZFtqXS5pbmNsdWRlcyhzdGFydCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gdGhpcy5ib2FyZFtqXS5pbmRleE9mKHN0YXJ0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ib2FyZFtqXVtpbmRleF0gPSBzaGlwLm5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgc3RhcnQgKz0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnBsYWNlZFNoaXBzLnB1c2goc2hpcCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmVjaWV2ZUF0dGFjayhwb3NpdGlvbikge1xyXG4gICAgICAgIGxldCBjb2x1bW47XHJcbiAgICAgICAgbGV0IHN0ciA9IHBvc2l0aW9uLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgbGV0IHJvdztcclxuICAgICAgICBpZiAocG9zaXRpb24gPCAxMSkge1xyXG4gICAgICAgICAgICBjb2x1bW4gPSBwb3NpdGlvbiAtIDE7XHJcbiAgICAgICAgICAgIHJvdyA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHBvc2l0aW9uID09PSAxMDApIHtcclxuICAgICAgICAgICAgcm93ID0gOTtcclxuICAgICAgICAgICAgY29sdW1uID0gOTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJvdyA9IHBhcnNlSW50KHN0ci5zbGljZSgwLCAxKSk7XHJcbiAgICAgICAgICAgIGNvbHVtbiA9IHBhcnNlSW50KHN0ci5zbGljZSgxLCAyKSkgLSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIU51bWJlci5pc0ludGVnZXIodGhpcy5ib2FyZFtyb3ddW2NvbHVtbl0pKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGl0cy5wdXNoKHBvc2l0aW9uKTtcclxuICAgICAgICAgICAgdGhpcy5wbGFjZWRTaGlwcy5mb3JFYWNoKHNoaXAgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNoaXAubmFtZSA9PT0gdGhpcy5ib2FyZFtyb3ddW2NvbHVtbl0pIHtcclxuICAgICAgICAgICAgICAgICAgICBzaGlwLmhpdChwb3NpdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hpcC5pc1N1bmsoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5taXNzZXMucHVzaChwb3NpdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaXNPdmVyKCkge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5wbGFjZWRTaGlwcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5wbGFjZWRTaGlwc1tpXS5zdW5rID0gZmFsc2UpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgdmFsaWRQbGFjZW1lbnQocG9zaXRpb24sIGxlbmd0aCwgaXNWZXJ0aWNhbCkge1xyXG4gICAgICAgIC8vZ2V0IGNvbHVtbiBhbmQgcm93IGZyb20gcG9zaXRpb25cclxuICAgICAgICBsZXQgc3RyID0gcG9zaXRpb24udG9TdHJpbmcoKTtcclxuICAgICAgICBsZXQgY29sdW1uO1xyXG4gICAgICAgIGxldCByb3c7XHJcbiAgICAgICAgaWYgKHBvc2l0aW9uIDwgMTEpIHtcclxuICAgICAgICAgICAgY29sdW1uID0gcG9zaXRpb24gLSAxO1xyXG4gICAgICAgICAgICByb3cgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChwb3NpdGlvbiA9PT0gMTAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJvdyA9IHBhcnNlSW50KHN0ci5zbGljZSgwLCAxKSk7XHJcbiAgICAgICAgICAgIGlmIChwb3NpdGlvbiAlIDEwID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb2x1bW4gPSA5O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIGNvbHVtbiA9IHBhcnNlSW50KHN0ci5zbGljZSgxLCAyKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCB0ZW1wUm93ID0gcm93O1xyXG4gICAgICAgIGxldCB0ZW1wQ29sdW1uID0gY29sdW1uO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHJvdywgY29sdW1uKTtcclxuICAgICAgICBjb25zb2xlLmxvZyh0eXBlb2YgdGhpcy5ib2FyZFt0ZW1wUm93XVtjb2x1bW5dID09PSAnc3RyaW5nJyk7XHJcbiAgICAgICAgLy8gZm9yKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKXtcclxuICAgICAgICAvLyAgIGlmKGlzVmVydGljYWwpe1xyXG4gICAgICAgIC8vICAgICBpZighTnVtYmVyLmlzSW50ZWdlcih0aGlzLmJvYXJkW3RlbXBSb3ddW2NvbHVtbl0pKXtcclxuICAgICAgICAvLyAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vICAgICB0ZW1wUm93KytcclxuICAgICAgICAvLyAgIH1cclxuICAgICAgICAvLyAgIGVsc2UgaWYoIWlzVmVydGljYWwpe1xyXG4gICAgICAgIC8vICAgICBpZih0eXBlb2YgdGhpcy5ib2FyZFtyb3ddW3RlbXBDb2x1bW5dID09PSAnc3RyaW5nJyl7XHJcbiAgICAgICAgLy8gICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyAgICAgdGVtcENvbHVtbisrXHJcbiAgICAgICAgLy8gICB9XHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIC8vc3RhcnRpbmcgcm93IHBsdXMgbGVuZ3RoIG9mIHNoaXAgbXVzdCBiZSAxMCBvciBsZXNzIHRvIGJlIHZhbGlkXHJcbiAgICAgICAgaWYgKGlzVmVydGljYWwgJiYgcm93ICsgbGVuZ3RoIC0gMSA8IDEwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICghaXNWZXJ0aWNhbCAmJiBjb2x1bW4gKyBsZW5ndGggLSAxIDwgMTApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHJhbmRvbWx5UGxhY2VTaGlwcyhzaGlwKSB7XHJcbiAgICAgICAgbGV0IHZhbGlkID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IHBvc2l0aW9uO1xyXG4gICAgICAgIGxldCBkaXJlY3Rpb247XHJcbiAgICAgICAgd2hpbGUgKCF2YWxpZCkge1xyXG4gICAgICAgICAgICBwb3NpdGlvbiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMCkgKyAxO1xyXG4gICAgICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IC41KSB7XHJcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMudmFsaWRQbGFjZW1lbnQocG9zaXRpb24sIHNoaXAubGVuZ3RoLCBkaXJlY3Rpb24pKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYWNlU2hpcChzaGlwLCBwb3NpdGlvbiwgZGlyZWN0aW9uKTtcclxuICAgICAgICAgICAgICAgIHZhbGlkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhbGlkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgR2FtZUJvYXJkIH0gZnJvbSBcIi4vZ2FtZWJvYXJkXCI7XHJcbmV4cG9ydCBjbGFzcyBQbGF5ZXIge1xyXG4gICAgY29uc3RydWN0b3IobmFtZSwgb3BvbmVudCkge1xyXG4gICAgICAgIHRoaXMuZ2FtZWJvYXJkID0gbmV3IEdhbWVCb2FyZCgpO1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5zaG90cyA9IFtdO1xyXG4gICAgICAgIHRoaXMub3BvbmVudCA9IG9wb25lbnQ7XHJcbiAgICB9XHJcbiAgICBhdHRhY2socG9zaXRpb24sIG9wb25lbnQpIHtcclxuICAgICAgICBpZiAoIXRoaXMuc2hvdHMuaW5jbHVkZXMocG9zaXRpb24pKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvdHMucHVzaChwb3NpdGlvbik7XHJcbiAgICAgICAgICAgIG9wb25lbnQuZ2FtZWJvYXJkLnJlY2lldmVBdHRhY2socG9zaXRpb24pO1xyXG4gICAgICAgICAgICBpZiAob3BvbmVudC5nYW1lYm9hcmQuaXNPdmVyKCkpIHtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiZ2dcIilcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJhbmRvbUF0dGFjayhvcHBvbmVudCkge1xyXG4gICAgICAgIGxldCB2YWxpZFNob3QgPSBmYWxzZTtcclxuICAgICAgICBsZXQgcG9zaXRpb247XHJcbiAgICAgICAgd2hpbGUgKCF2YWxpZFNob3QpIHtcclxuICAgICAgICAgICAgcG9zaXRpb24gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDApICsgMTtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnNob3RzLmluY2x1ZGVzKHBvc2l0aW9uKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG90cy5wdXNoKHBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgIG9wcG9uZW50LmdhbWVib2FyZC5yZWNpZXZlQXR0YWNrKHBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgIHZhbGlkU2hvdCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIFNoaXAge1xyXG4gICAgY29uc3RydWN0b3IobGVuZ3RoLCBuYW1lKSB7XHJcbiAgICAgICAgdGhpcy5sZW5ndGggPSBsZW5ndGg7XHJcbiAgICAgICAgdGhpcy5pc0hpdCA9IFtdO1xyXG4gICAgICAgIHRoaXMuc3VuayA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICB9XHJcbiAgICBoaXQocG9zaXRpb24pIHtcclxuICAgICAgICAvL3B1c2ggcG9zaXRpb24gdG8gaXNoaXQgYXJyYXlcclxuICAgICAgICBpZiAoIXRoaXMuaXNIaXQuaW5jbHVkZXMocG9zaXRpb24pICYmIHRoaXMuaXNIaXQubGVuZ3RoIDwgdGhpcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5pc0hpdC5wdXNoKHBvc2l0aW9uKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXNIaXQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaXNTdW5rKCkge1xyXG4gICAgICAgIC8vY2hlY2tzIGVhY2ggcG9zaXRpb24gb2Ygc2hpcCBmb3IgaGl0cyBpZiBhbGwgYXJlIGhpdCBpcyBzdW5rXHJcbiAgICAgICAgaWYgKHRoaXMuaXNIaXQubGVuZ3RoID09PSB0aGlzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLnN1bmsgPSB0cnVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IFBsYXllciB9IGZyb20gXCIuLi9mYWN0b3JpZXMvcGxheWVyc1wiO1xyXG5pbXBvcnQgeyBTaGlwIH0gZnJvbSBcIi4uL2ZhY3Rvcmllcy9zaGlwXCI7XHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJlbmRlckdyaWRzKHBsYXllck5hbWUpIHtcclxuICAgIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XHJcbiAgICBjb25zdCBncmlkMSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ncmlkLWNvbnRhaW5lcjEnKTtcclxuICAgIGNvbnN0IHRpdGxlMSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50aXRsZS0xJyk7XHJcbiAgICB0aXRsZTEudGV4dENvbnRlbnQgPSBwbGF5ZXJOYW1lO1xyXG4gICAgY29uc3QgZ3JpZDIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ3JpZC1jb250YWluZXIyJyk7XHJcbiAgICBjb25zdCB0aXRsZTIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGl0bGUtMicpO1xyXG4gICAgdGl0bGUyLnRleHRDb250ZW50ID0gXCJDb21wdXRlclwiO1xyXG4gICAgbGV0IGh1bWFuID0gbmV3IFBsYXllcihcImh1bWFuXCIsIFwiY29tcHV0ZXJcIik7XHJcbiAgICBsZXQgY29tcHV0ZXIgPSBuZXcgUGxheWVyKFwiY29tcHV0ZXJcIiwgXCJodW1hblwiKTtcclxuICAgIGxldCBib2FyZCA9IGh1bWFuLmdhbWVib2FyZC5ib2FyZDtcclxuICAgIGxldCBjYXJyaWVyID0gbmV3IFNoaXAoNSwgXCJjYXJyaWVyXCIpO1xyXG4gICAgbGV0IGRlc3Ryb3llciA9IG5ldyBTaGlwKDQsIFwiZGVzdHJveWVyXCIpO1xyXG4gICAgbGV0IHN1Ym1hcmluZSA9IG5ldyBTaGlwKDMsIFwic3VibWFyaW5lXCIpO1xyXG4gICAgbGV0IHBhdHJvbCA9IG5ldyBTaGlwKDIsIFwicGF0cm9sXCIpO1xyXG4gICAgY29uc3QgYWxsU2hpcHMgPSBbY2FycmllciwgZGVzdHJveWVyLCBzdWJtYXJpbmUsIHBhdHJvbF07XHJcbiAgICAvLyBhbGxTaGlwcy5mb3JFYWNoKHNoaXAgPT4ge1xyXG4gICAgLy8gICAgIGNvbXB1dGVyLmdhbWVib2FyZC5yYW5kb21seVBsYWNlU2hpcHMoc2hpcCk7XHJcbiAgICAvLyAgICAgaHVtYW4uZ2FtZWJvYXJkLnJhbmRvbWx5UGxhY2VTaGlwcyhzaGlwKTtcclxuICAgIC8vIH0pXHJcbiAgICBhbGxTaGlwcy5mb3JFYWNoKHNoaXAgPT4ge1xyXG4gICAgICAgIGNvbXB1dGVyLmdhbWVib2FyZC5yYW5kb21seVBsYWNlU2hpcHMoc2hpcCk7XHJcbiAgICAgICAgaHVtYW4uZ2FtZWJvYXJkLnJhbmRvbWx5UGxhY2VTaGlwcyhzaGlwKTtcclxuICAgIH0pO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBib2FyZC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgYm9hcmRbaV0ubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgY29uc3QgZ3JpZEl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgZ3JpZEl0ZW0uc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIiwgYm9hcmRbaV1bal0pO1xyXG4gICAgICAgICAgICBncmlkSXRlbS50ZXh0Q29udGVudCA9IGJvYXJkW2ldW2pdO1xyXG4gICAgICAgICAgICBpZiAoIU51bWJlci5pc0ludGVnZXIoYm9hcmRbaV1bal0pKSB7XHJcbiAgICAgICAgICAgICAgICBncmlkSXRlbS5jbGFzc0xpc3QuYWRkKCdzaGlwLWhlcmUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBncmlkSXRlbS5jbGFzc0xpc3QuYWRkKCdncmlkLWl0ZW0nKTtcclxuICAgICAgICAgICAgZ3JpZDEgPT09IG51bGwgfHwgZ3JpZDEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGdyaWQxLmFwcGVuZENoaWxkKGdyaWRJdGVtKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJvYXJkLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBib2FyZFtpXS5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICBjb25zdCBncmlkSXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBncmlkSXRlbS5zZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLCBib2FyZFtpXVtqXSk7XHJcbiAgICAgICAgICAgIC8vIGdyaWRJdGVtLnRleHRDb250ZW50ID0gYm9hcmRbaV1bal1cclxuICAgICAgICAgICAgZ3JpZEl0ZW0uY2xhc3NMaXN0LmFkZCgnZ3JpZC1pdGVtJyk7XHJcbiAgICAgICAgICAgIGdyaWRJdGVtLmNsYXNzTGlzdC5hZGQoJ2FpLWdyaWQnKTtcclxuICAgICAgICAgICAgZ3JpZEl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIU51bWJlci5pc0ludGVnZXIoYm9hcmRbaV1bal0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ3JpZEl0ZW0uY2xhc3NMaXN0LmFkZCgnaGl0Jyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBncmlkSXRlbS5jbGFzc0xpc3QuYWRkKCdtaXNzJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBncmlkMiA9PT0gbnVsbCB8fCBncmlkMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogZ3JpZDIuYXBwZW5kQ2hpbGQoZ3JpZEl0ZW0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IGdyaWRJdGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmdyaWQtaXRlbScpO1xyXG59XHJcbiIsImltcG9ydCByZW5kZXJHcmlkcyBmcm9tIFwiLi9yZW5kZXJHYW1lQm9hcmRzXCI7XHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHN0YXJ0R2FtZSgpIHtcclxuICAgIGNvbnN0IGluZm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaW5mbycpO1xyXG4gICAgY29uc3QgaW5wdXRDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGlucHV0Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJpbnB1dC1jb250YWluZXJcIik7XHJcbiAgICBjb25zdCBuYW1lTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xyXG4gICAgbmFtZUxhYmVsLnRleHRDb250ZW50ID0gXCJFbnRlciBOYW1lOlwiO1xyXG4gICAgY29uc3QgbmFtZUlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcclxuICAgIG5hbWVJbnB1dC5jbGFzc0xpc3QuYWRkKCduYW1lLWlucHV0Jyk7XHJcbiAgICBjb25zdCBzdGFydEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgc3RhcnRCdXR0b24uY2xhc3NMaXN0LmFkZChcInN0YXJ0LWJ1dHRvblwiKTtcclxuICAgIHN0YXJ0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTdGFydFwiO1xyXG4gICAgaW5wdXRDb250YWluZXIuYXBwZW5kQ2hpbGQobmFtZUxhYmVsKTtcclxuICAgIGlucHV0Q29udGFpbmVyLmFwcGVuZENoaWxkKG5hbWVJbnB1dCk7XHJcbiAgICBpbnB1dENvbnRhaW5lci5hcHBlbmRDaGlsZChzdGFydEJ1dHRvbik7XHJcbiAgICBpbmZvID09PSBudWxsIHx8IGluZm8gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGluZm8uYXBwZW5kQ2hpbGQoaW5wdXRDb250YWluZXIpO1xyXG4gICAgc3RhcnRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKG5hbWVJbnB1dC52YWx1ZSAhPT0gJycpIHtcclxuICAgICAgICAgICAgY29uc3QgbmFtZSA9IG5hbWVJbnB1dC52YWx1ZTtcclxuICAgICAgICAgICAgaW5mbyA9PT0gbnVsbCB8fCBpbmZvID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpbmZvLnJlbW92ZUNoaWxkKGlucHV0Q29udGFpbmVyKTtcclxuICAgICAgICAgICAgcmVuZGVyR3JpZHMobmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBuYW1lID0gXCJUbyBsYXp5IHRvIGVudGVyIGEgbmFtZVwiO1xyXG4gICAgICAgICAgICBpbmZvID09PSBudWxsIHx8IGluZm8gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGluZm8ucmVtb3ZlQ2hpbGQoaW5wdXRDb250YWluZXIpO1xyXG4gICAgICAgICAgICByZW5kZXJHcmlkcyhuYW1lKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG4iLCJpbXBvcnQgc3RhcnRHYW1lIGZyb20gXCIuL3VpL3N0YXJ0R2FtZVwiO1xyXG5zdGFydEdhbWUoKTtcclxuLy8gcmVuZGVyR3JpZHMoJ2pqY3JhenltYW4nKVxyXG4iXSwibmFtZXMiOlsiR2FtZUJvYXJkIiwiY29uc3RydWN0b3IiLCJ0aGlzIiwiYm9hcmQiLCJjcmVhdGVCb2FyZCIsImhpdHMiLCJtaXNzZXMiLCJwbGFjZWRTaGlwcyIsImdhbWVPdmVyIiwiY291bnQiLCJpIiwiaiIsInBsYWNlU2hpcCIsInNoaXAiLCJzdGFydCIsInZlcnRpY2FsIiwidmFsaWRQbGFjZW1lbnQiLCJsZW5ndGgiLCJpbmNsdWRlcyIsImluZGV4IiwiaW5kZXhPZiIsIm5hbWUiLCJwdXNoIiwicmVjaWV2ZUF0dGFjayIsInBvc2l0aW9uIiwiY29sdW1uIiwicm93Iiwic3RyIiwidG9TdHJpbmciLCJwYXJzZUludCIsInNsaWNlIiwiTnVtYmVyIiwiaXNJbnRlZ2VyIiwiZm9yRWFjaCIsImhpdCIsImlzU3VuayIsImlzT3ZlciIsInN1bmsiLCJpc1ZlcnRpY2FsIiwidGVtcFJvdyIsImNvbnNvbGUiLCJsb2ciLCJyYW5kb21seVBsYWNlU2hpcHMiLCJkaXJlY3Rpb24iLCJ2YWxpZCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsIlBsYXllciIsIm9wb25lbnQiLCJnYW1lYm9hcmQiLCJzaG90cyIsImF0dGFjayIsInJhbmRvbUF0dGFjayIsIm9wcG9uZW50IiwidmFsaWRTaG90IiwiU2hpcCIsImlzSGl0IiwicmVuZGVyR3JpZHMiLCJwbGF5ZXJOYW1lIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZ3JpZDEiLCJ0ZXh0Q29udGVudCIsImdyaWQyIiwiaHVtYW4iLCJjb21wdXRlciIsImdyaWRJdGVtIiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsImNsYXNzTGlzdCIsImFkZCIsImFwcGVuZENoaWxkIiwiYWRkRXZlbnRMaXN0ZW5lciIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbmZvIiwiaW5wdXRDb250YWluZXIiLCJuYW1lTGFiZWwiLCJuYW1lSW5wdXQiLCJzdGFydEJ1dHRvbiIsInZhbHVlIiwicmVtb3ZlQ2hpbGQiLCJzdGFydEdhbWUiXSwic291cmNlUm9vdCI6IiJ9